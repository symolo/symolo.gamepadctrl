parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ncby":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=u();return function(){var n,o=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return r(this,n)}}function r(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.snes_gamepad=exports.base_gamepad=void 0;var p=function(){function t(e,n){c(this,t),this._controller=e,this._index=n.index}return h(t,[{key:"controller",get:function(){return this._controller}},{key:"index",get:function(){return this._index}},{key:"refresh",value:function(){}},{key:"state",value:function(){return{}}}]),t}();exports.base_gamepad=p;var a=function(t){e(r,p);var n=o(r);function r(){var t;return c(this,r),(t=n.apply(this,arguments))._A=!1,t._B=!1,t._X=!1,t._Y=!1,t._Start=!1,t._Select=!1,t._Up=!1,t._Down=!1,t._Left=!1,t._Right=!1,t}return h(r,[{key:"A",get:function(){return this._A},set:function(t){this._A!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"A"}),this._A=t}},{key:"B",get:function(){return this._B},set:function(t){this._B!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"B"}),this._B=t}},{key:"X",get:function(){return this._X},set:function(t){this._X!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"X"}),this._X=t}},{key:"Y",get:function(){return this._Y},set:function(t){this._Y!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Y"}),this._Y=t}},{key:"Start",get:function(){return this._Start},set:function(t){this._Start!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Start"}),this._Start=t}},{key:"Select",get:function(){return this._Select},set:function(t){this._Select!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Select"}),this._Select=t}},{key:"Up",get:function(){return this._Up},set:function(t){this._Up!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Up"}),this._Up=t}},{key:"Down",get:function(){return this._Down},set:function(t){this._Down!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Down"}),this._Down=t}},{key:"Left",get:function(){return this._Left},set:function(t){this._Left!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Left"}),this._Left=t}},{key:"Right",get:function(){return this._Right},set:function(t){this._Right!=t&&this.controller.fire(t?"button:down":"button:up",{padnumber:this.index,button:"Right"}),this._Right=t}},{key:"refresh",value:function(){var t=navigator.getGamepads()[this.index];t&&(this.X=t.buttons[0].pressed,this.A=t.buttons[1].pressed,this.B=t.buttons[2].pressed,this.Y=t.buttons[3].pressed,this.Start=t.buttons[9].pressed,this.Select=t.buttons[8].pressed,this.Up=-1==t.axes[1],this.Right=1==t.axes[0],this.Down=1==t.axes[1],this.Left=-1==t.axes[0])}},{key:"state",value:function(){return{A:this._A,B:this._B,X:this._X,Y:this._Y,Start:this._Start,Select:this._Select,Up:this._Up,Right:this._Right,Down:this._Down,Left:this._Left}}}]),r}();exports.snes_gamepad=a;
},{}],"AbkO":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gamepadctrl=void 0;var n=require("./pad"),s=function(){function e(){t(this,e)}return i(e,null,[{key:"getPadByType",value:function(t,e,i){if("snes"==t)return new n.snes_gamepad(i,e);throw"pad type: "+t+" not registred"}}]),e}(),r=function(){function e(){var i=this;t(this,e),this._padtype="snes",this.isActive=!1,this._padList=new Array,window.addEventListener("gamepadconnected",function(t){var e=s.getPadByType(i._padtype,t.gamepad,i);i._padList.push(e)}),window.addEventListener("gamepaddisconnected",function(t){var e=i._padList.find(function(e){return e.index==t.gamepad.index});e&&i._padList.splice(i._padList.indexOf(e))}),this.isActive=!0,this.gamepadLoop()}return i(e,[{key:"unload",value:function(){this.isActive=!1}},{key:"gamepadLoop",value:function(){this._padList.forEach(function(t){return t.refresh()}),this.isActive&&window.requestAnimationFrame(this.gamepadLoop.bind(this))}},{key:"getStates",value:function(){var t=[];return this._padList.forEach(function(e){t.push(e.state())}),t}}],[{key:"isAvailable",value:function(){return!!navigator.getGamepads()}}]),e}();exports.gamepadctrl=r;var a=function(){function e(){t(this,e)}return i(e,[{key:"on",value:function(t,e){return this._evtsubs||(this._evtsubs={}),void 0===this._evtsubs[t]&&(this._evtsubs[t]=[]),-1===this._evtsubs[t].indexOf(e)&&this._evtsubs[t].push(e),this}},{key:"fire",value:function(t,e){try{if(!this._evtsubs)return;if(void 0===this._evtsubs[t])return;if(this._inevt||(this._inevt={}),!0===this._inevt[t])return;this._inevt[t]=!0;for(var i=this._evtsubs[t],n=0;n<i.length;n++)i[n](this,e)}catch(s){throw s}finally{this._inevt[t]=!1}}},{key:"off",value:function(t,e){void 0!==this._evtsubs[t]&&(this._evtsubs[t]=this._evtsubs[t].filter(function(t){return t!==e}))}}]),e}();function o(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})})}o(r,[a]);
},{"./pad":"Ncby"}]},{},["AbkO"], null)
//# sourceMappingURL=/gamepadctrl.js.map